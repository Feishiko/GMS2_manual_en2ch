<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>数据类型</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/3_gml_overview/9_data_types.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F9_data_types.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F9_data_types.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>数据类型</h2>

<div class="body-scroll">
<p><br>
</p>

<p>在上一部分中，我们讲到了 <a href=
"6_scope.html">变量以及它们的作用域规则</a>，但是对于变量所能存储的各种 <b>数据类型（Data types）</b> 所谈甚少。因此，本章将会解释各种不同的类型以及它们都可以被用于做什么。</p>

<p>在继续之前，我们先简单地解释一下 “数据类型” 是什么意思。当你创建一个变量的时候，变量会被用于承载某种信息，还有当你调用一个 <i>GML</i> 函数的时候，它也会返回一些信息。然而这些信息可能来得五花八门各具风味，比如它们可以是一个实数（Real）或者也可以是一段字符串（String）。这些值所使用的的不同类型就被称为 <b>数据类型（Data Types）</b> 并且当使用 <i>GML</i> 时候，它们可以是下述几种类型：</p>

<blockquote><label class="collapse" for="one">字符串（String）</label>
<input id="one" type="checkbox">
<div class="index_list">
<p>一个字符串就是简单地使用引号（可以是 '...' 也可以是 "..."）括起来的任意一段文本。你可以对字符串执行某些操作，例如将它们叠加到一起形成一段更长的字符串（连接操作（Concatenation）），你也可以改变字符串的属性甚至从中抽取实数部分。字符串函数的更多信息参见：<a href=
"../4_gml_reference/strings/index.html">GameMaker 语言参考 - 字符串</a></p>
</div>
<br>
<label class="collapse" for="two">实数（Real Numbers）</label> <input id=
"two" type="checkbox">
<div class="index_list">
<p>实数可以是任何一个既不是字符串也不是其他数据类型的值，它就是一个数值而已。因此，124, 45639.566546456, 0, -45.5 等……所有的这些都是实数。所有的实数都被存储为一个 32 位的浮点数（即使是个整数），因此在处理这些数据的时候你可能会遇到一些轻微的舍入误差（Rounding Errors）。关于这个及其他与实数相关的函数参见 <a href=
"../4_gml_reference/maths/real%20valued%20functions/index.html">GML参考 - 实数</a></p>

<p>请注意，在 <i>GameMaker Studio 2</i> 中创建的变量都被存储为一个双精度浮点数，但是当使用扩展的时候你可以使用其他类型。这些其它类型的数值可以从一个扩展中传递到 GameMaker Studio 2 中，然后可以使用下面所列举的相应的 <tt>is_</tt> 函数来检测它们的类型。</p>
</div>
<br>
<label class="collapse" for="three">数组（Arrays）</label> <input id=
"three" type="checkbox">
<div class="index_list">
<p>数组是一个特殊的数据类型，它们可以用来存储多个值。你可以将数组赋予给一个变量，然后用值 “填入” 数组的各个索引元素中。通过传递引用（Pass-by-reference）可以将这个数组传递给脚本或函数中，但是当你要修改所传递的数组的时候，它会变成原来数组的一个拷贝（Copy），因此你需要回到原来需要修改的数组中。关于数组的更多信息，参见 <a href="10_arrays.html">GML概述 - 数组</a></p>
</div>
<br>
<label class="collapse" for="four">布尔值（Boolean）</label> <input id="four"
type="checkbox">
<div class="index_list">
<p>布尔值可以是 <tt>true</tt> 或 <tt>false</tt>。请注意，当前的 <i>GameMaker Studio 2</i> 还不支持 “真正的” 布尔值，并且实际上是视所有低于 0.5 的实数为假（false），所有大于等于 0.5 的值为真（true）。然而，这也 <i>不</i> 意味着你应该使用 1 或 0（或者别的实数）来进行检测真假，为此还提供了 <b>常量</b> <tt>true</tt> 和 <tt>false</tt>，你应该总是使用它们以防止在未来的更新中引入真正的布尔数据类型时可能引发的问题。</p>
</div>
<br>
<label class="collapse" for="five">指针（Pointer）</label> <input id="five"
type="checkbox">
<div class="index_list">
<p>指针是一个 “指向” 一个内存位置（Memory Location）的一种数据类型你不可以对指针进行操作，它们只是被用于某些极特殊的函数中的，像给其他函数取得纹理或缓冲区地址的函数中。能够返回指针的函数典型例子有 <a href=
"../4_gml_reference/buffers/buffer_get_address.html"><tt>buffer_get_address</tt></a> 或 <a href=
"../4_gml_reference/sprites/sprite_get_texture.html"><tt>sprite_get_texture</tt></a>。</p>

<p>还有一个用于检测一个值是否为指针的函数（参见下文的 “<b>数据类型检测</b>”），以及一个能够将值转换为指针的函数</p>

<ul>
<li><a href="ptr.html">ptr</a><br>
</li>
</ul>

<p>在使用指针的时候，你可能会使用（或通过返回得到）如下的内置常量：</p>

<div class="compat">
<table>
<tr>
<th>常量</th>
<th>描述</th>
</tr>

<tr>
<td>pointer_null</td>
<td>该常量表示指针没有指向一个地址（空地址）（和 C++ 中的 <tt>NULL</tt> 或 C# 中的 null 一样）</td>
</tr>

<tr class="alt">
<td>pointer_invalid</td>
<td>该常量表示该值不是一个有效的指针。</td>
</tr>
</table>
</div>
</div>
<br>
<label class="collapse" for="six">枚举（Enum）</label> <input id="six"
type="checkbox">
<div class="index_list">
<p>一个枚举也就是一个枚举器（Enumerator），它们允许你使用常量值列表创建自己的有限的数据类型。枚举具有 <a href="6_scope.html">全局作用域</a>（这是隐式的，而且不需要 <tt>global</tt> 前缀）并且它们具有如下结构：</p>

<p class="code">enum
<i>&lt;variable&gt;</i>{<i>&lt;constant&gt;</i> [=
<i>&lt;value&gt;</i>]}<br></p>

<p>在下述范例中，我们为彩虹的颜色创建一个枚举，并为其赋予不同的变量以及默认值：</p>

<p class="code">enum rainbowcolors {<br>&nbsp;&nbsp;&nbsp;red,<br>&nbsp;&nbsp;&nbsp;orange,<br>&nbsp;&nbsp;&nbsp;yellow,<br>&nbsp;&nbsp;&nbsp;green,<br>&nbsp;&nbsp;&nbsp;blue,<br>&nbsp;&nbsp;&nbsp;indigo,<br>&nbsp;&nbsp;&nbsp;violet<br>&nbsp;&nbsp;&nbsp;}<br></p>

<p>枚举的项目只可以是 <b>实数</b> 或 <b>包含前面枚举的表达式</b>，并且默认地数字从 0 开始向上走，因此我们上面所给的例子会默认 <tt>red = 0</tt>、<tt>orange = 1</tt>、<tt>yellow = 2</tt>等……你也可以在制作过程中将值赋给枚举变量：</p>

<p class="code">enum rainbowcolors {<br>&nbsp;&nbsp;&nbsp;red = 5,<br>&nbsp;&nbsp;&nbsp;orange = 5 * 2,<br>&nbsp;&nbsp;&nbsp;yellow = 15,<br>&nbsp;&nbsp;&nbsp;green = 20,<br>&nbsp;&nbsp;&nbsp;blue = 25,<br>&nbsp;&nbsp;&nbsp;indigo = 30,<br>&nbsp;&nbsp;&nbsp;violet = 35 * enum_test.entry<br>&nbsp;&nbsp;&nbsp;}<br></p>

<p>请注意，上面的例子中我们使用了另一个枚举为 "violet" 创建了一个表达式。这仅适用在，所引用的枚举在一个表达式中使用它 <i>之前</i> 创建的时候，但它不适用于变量或函数，因为枚举值必须能够在编译时作为常量进行求值。另请注意，所有枚举值都会评估为 <b>整数</b> 值，当你创造自己的枚举时，你应该意识到这一点：枚举生效 <i>只允许整数值</i>。</p>

<p>要稍后访问给定枚举类型中的值，你可以使用 <tt>“.”</tt> 方法，像这样：</p>

<p class="code">var value = rainbowcolours.green;</p>

<p>请注意，在任何枚举常量创建后，你无法修改它们的值。</p>
</div>
<br>
<label class="collapse" for="sevem">未定义（Undefined）</label> <input id=
"sevem" type="checkbox">
<div class="index_list">
<p>未定义的值（也称为 “null” 值）是指一个表达式没有正确值的情况，尽管它在语法上是正确的，因此必须返回 <i>某些事物</i>。例如，假设你有一个 <tt>ds_map</tt> 并使用函数 <tt>ds_map_find_value()</tt>。现在，当 map（译者注：映射数据）没有找到值时会发生什么？好吧，函数格式正确，问题是没有这样的值存在，那么它将返回 <b>常数</b> <tt>undefined</tt>，你可以检查这个常数为 <tt>true</tt> 或任何其他值。</p>
</div></blockquote>

<p><br>
</p>

<h2>检测数据类型</h2>

<p><i>GameMaker Studio 2</i> 允许你使用以下函数检查给定变量的数据类型：</p>

<ul>
<li><a href="checking_data_types/is_string.html">is_string</a><br>
</li>

<li><a href="checking_data_types/is_real.html">is_real</a><br>
</li>

<li><a href="checking_data_types/is_bool.html">is_bool</a><br>
</li>

<li><a href="checking_data_types/is_array.html">is_array</a><br>
</li>

<li><a href="checking_data_types/is_ptr.html">is_ptr</a><br>
</li>

<li><a href="checking_data_types/is_int32.html">is_int32</a><br>
</li>

<li><a href="checking_data_types/is_int64.html">is_int64</a><br>
</li>

<li><a href="checking_data_types/is_vec3.html">is_vec3</a><br>
</li>

<li><a href="checking_data_types/is_vec4.html">is_vec4</a><br>
</li>

<li><a href="checking_data_types/is_matrix.html">is_matrix</a><br>
</li>

<li><a href=
"checking_data_types/is_undefined.html">is_undefined</a><br>
</li>

<li><a href="checking_data_types/typeof.html">typeof</a><br>
</li>
</ul>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">上一页：<a href="index.html">GML概述</a></div>

<div style="float:right">下一页：<a href=
"10_arrays.html">数组</a></div>
</div>
</div>

<h5>© Copyright YoYo Games Ltd. 2017 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
